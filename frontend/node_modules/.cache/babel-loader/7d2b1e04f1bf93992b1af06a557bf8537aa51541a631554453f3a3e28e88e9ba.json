{"ast":null,"code":"import React,{useState}from'react';import{Dialog,DialogTitle,DialogContent,DialogActions,TextField,Button,Box,InputAdornment}from'@mui/material';import ImageUpload from'./ImageUpload';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function ProductForm(_ref){let{product,onSave,onCancel}=_ref;const isEdit=!!product.id;const[form,setForm]=useState({name_en:product.name_en||'',name_zh:product.name_zh||'',materials_en:product.materials_en||'',materials_zh:product.materials_zh||'',price:product.price||'',image_url:product.image_url||''});const[uploading,setUploading]=useState(false);const handleChange=e=>{setForm({...form,[e.target.name]:e.target.value});};const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'';const handleImageUpload=async file=>{setUploading(true);const data=new FormData();data.append('image',file);const res=await fetch(`${API_BASE_URL}/api/upload`,{method:'POST',body:data});const result=await res.json();setForm({...form,image_url:result.url.replace('/uploads/','')});setUploading(false);};const handleSubmit=e=>{e.preventDefault();if(!form.name_en&&!form.name_zh)return;onSave({...product,...form},isEdit);};return/*#__PURE__*/_jsxs(Dialog,{open:true,onClose:onCancel,maxWidth:\"sm\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:isEdit?'編輯產品':'新增產品'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(DialogContent,{children:[/*#__PURE__*/_jsx(TextField,{label:\"\\u82F1\\u6587\\u540D\\u7A31\",name:\"name_en\",value:form.name_en,onChange:handleChange,fullWidth:true,margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{label:\"\\u4E2D\\u6587\\u540D\\u7A31\",name:\"name_zh\",value:form.name_zh,onChange:handleChange,fullWidth:true,margin:\"normal\"}),/*#__PURE__*/_jsx(TextField,{label:\"\\u6750\\u6599(\\u82F1)\",name:\"materials_en\",value:form.materials_en,onChange:handleChange,fullWidth:true,margin:\"normal\",multiline:true}),/*#__PURE__*/_jsx(TextField,{label:\"\\u6750\\u6599(\\u4E2D)\",name:\"materials_zh\",value:form.materials_zh,onChange:handleChange,fullWidth:true,margin:\"normal\",multiline:true}),/*#__PURE__*/_jsx(TextField,{label:\"\\u50F9\\u683C\",name:\"price\",value:form.price,onChange:handleChange,type:\"number\",fullWidth:true,margin:\"normal\",InputProps:{startAdornment:/*#__PURE__*/_jsx(InputAdornment,{position:\"start\",children:\"$\"})}}),/*#__PURE__*/_jsx(Box,{sx:{mt:2},children:/*#__PURE__*/_jsx(ImageUpload,{imageUrl:form.image_url,onUpload:handleImageUpload,uploading:uploading})})]}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:onCancel,children:\"\\u53D6\\u6D88\"}),/*#__PURE__*/_jsx(Button,{type:\"submit\",variant:\"contained\",disabled:uploading,children:\"\\u5132\\u5B58\"})]})]})]});}export default ProductForm;","map":{"version":3,"names":["React","useState","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Button","Box","InputAdornment","ImageUpload","jsx","_jsx","jsxs","_jsxs","ProductForm","_ref","product","onSave","onCancel","isEdit","id","form","setForm","name_en","name_zh","materials_en","materials_zh","price","image_url","uploading","setUploading","handleChange","e","target","name","value","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","handleImageUpload","file","data","FormData","append","res","fetch","method","body","result","json","url","replace","handleSubmit","preventDefault","open","onClose","maxWidth","fullWidth","children","onSubmit","label","onChange","margin","multiline","type","InputProps","startAdornment","position","sx","mt","imageUrl","onUpload","onClick","variant","disabled"],"sources":["C:/Users/2311007/Desktop/poke/frontend/src/ProductForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Button,\r\n  Box,\r\n  InputAdornment,\r\n} from '@mui/material';\r\nimport ImageUpload from './ImageUpload';\r\n\r\nfunction ProductForm({ product, onSave, onCancel }) {\r\n  const isEdit = !!product.id;\r\n  const [form, setForm] = useState({\r\n    name_en: product.name_en || '',\r\n    name_zh: product.name_zh || '',\r\n    materials_en: product.materials_en || '',\r\n    materials_zh: product.materials_zh || '',\r\n    price: product.price || '',\r\n    image_url: product.image_url || '',\r\n  });\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const handleChange = (e) => {\r\n    setForm({ ...form, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || '';\r\n  const handleImageUpload = async (file) => {\r\n    setUploading(true);\r\n    const data = new FormData();\r\n    data.append('image', file);\r\n    const res = await fetch(`${API_BASE_URL}/api/upload`, {\r\n      method: 'POST',\r\n      body: data,\r\n    });\r\n    const result = await res.json();\r\n    setForm({ ...form, image_url: result.url.replace('/uploads/', '') });\r\n    setUploading(false);\r\n  };\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    if (!form.name_en && !form.name_zh) return;\r\n    onSave({ ...product, ...form }, isEdit);\r\n  };\r\n\r\n  return (\r\n    <Dialog open onClose={onCancel} maxWidth=\"sm\" fullWidth>\r\n      <DialogTitle>{isEdit ? '編輯產品' : '新增產品'}</DialogTitle>\r\n      <form onSubmit={handleSubmit}>\r\n        <DialogContent>\r\n          <TextField\r\n            label=\"英文名稱\"\r\n            name=\"name_en\"\r\n            value={form.name_en}\r\n            onChange={handleChange}\r\n            fullWidth\r\n            margin=\"normal\"\r\n          />\r\n          <TextField\r\n            label=\"中文名稱\"\r\n            name=\"name_zh\"\r\n            value={form.name_zh}\r\n            onChange={handleChange}\r\n            fullWidth\r\n            margin=\"normal\"\r\n          />\r\n          <TextField\r\n            label=\"材料(英)\"\r\n            name=\"materials_en\"\r\n            value={form.materials_en}\r\n            onChange={handleChange}\r\n            fullWidth\r\n            margin=\"normal\"\r\n            multiline\r\n          />\r\n          <TextField\r\n            label=\"材料(中)\"\r\n            name=\"materials_zh\"\r\n            value={form.materials_zh}\r\n            onChange={handleChange}\r\n            fullWidth\r\n            margin=\"normal\"\r\n            multiline\r\n          />\r\n          <TextField\r\n            label=\"價格\"\r\n            name=\"price\"\r\n            value={form.price}\r\n            onChange={handleChange}\r\n            type=\"number\"\r\n            fullWidth\r\n            margin=\"normal\"\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">$</InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n          <Box sx={{ mt: 2 }}>\r\n            <ImageUpload\r\n              imageUrl={form.image_url}\r\n              onUpload={handleImageUpload}\r\n              uploading={uploading}\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={onCancel}>取消</Button>\r\n          <Button type=\"submit\" variant=\"contained\" disabled={uploading}>\r\n            儲存\r\n          </Button>\r\n        </DialogActions>\r\n      </form>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default ProductForm;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}