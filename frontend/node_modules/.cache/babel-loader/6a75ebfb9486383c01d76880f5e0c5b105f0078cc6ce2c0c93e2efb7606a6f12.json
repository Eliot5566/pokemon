{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2311007\\\\Desktop\\\\poke\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Container, Typography, Button, Snackbar, Alert, Box, Paper } from '@mui/material';\nimport ProductList from './ProductList';\nimport ProductForm from './ProductForm';\nimport ImportCSV from './ImportCSV';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'success'\n  });\n\n  // 取得產品列表\n  const fetchProducts = async () => {\n    try {\n      const res = await fetch('/api/products');\n      const data = await res.json();\n      setProducts(data);\n    } catch (err) {\n      setSnackbar({\n        open: true,\n        message: '載入產品失敗',\n        severity: 'error'\n      });\n    }\n  };\n  useEffect(() => {\n    fetchProducts();\n  }, []);\n\n  // 新增或編輯產品\n  const handleSave = async (product, isEdit) => {\n    // 欄位同步：name_en, name_zh, materials_en, materials_zh, price, image_url\n    const payload = {\n      name_en: product.name_en || '',\n      name_zh: product.name_zh || '',\n      materials_en: product.materials_en || '',\n      materials_zh: product.materials_zh || '',\n      price: product.price || '',\n      image_url: product.image_url || ''\n    };\n    try {\n      const res = await fetch(isEdit ? `/api/products/${product.id}` : '/api/products', {\n        method: isEdit ? 'PUT' : 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(payload)\n      });\n      if (!res.ok) throw new Error('儲存失敗');\n      setSnackbar({\n        open: true,\n        message: isEdit ? '產品已更新' : '產品已新增',\n        severity: 'success'\n      });\n      setEditingProduct(null);\n      fetchProducts();\n    } catch {\n      setSnackbar({\n        open: true,\n        message: '儲存失敗',\n        severity: 'error'\n      });\n    }\n  };\n\n  // 刪除產品\n  const handleDelete = async id => {\n    if (!window.confirm('確定要刪除這個產品嗎？')) return;\n    try {\n      const res = await fetch(`/api/products/${id}`, {\n        method: 'DELETE'\n      });\n      if (!res.ok) throw new Error('刪除失敗');\n      setSnackbar({\n        open: true,\n        message: '產品已刪除',\n        severity: 'success'\n      });\n      fetchProducts();\n    } catch {\n      setSnackbar({\n        open: true,\n        message: '刪除失敗',\n        severity: 'error'\n      });\n    }\n  };\n\n  // 批次匯入成功後刷新\n  const handleImportSuccess = () => {\n    setSnackbar({\n      open: true,\n      message: '匯入成功',\n      severity: 'success'\n    });\n    fetchProducts();\n  };\n  return /*#__PURE__*/_jsxDEV(Container, {\n    maxWidth: \"md\",\n    sx: {\n      py: 4\n    },\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h4\",\n      gutterBottom: true,\n      align: \"center\",\n      children: \"\\u5BF6\\u53EF\\u5922 3D \\u5217\\u5370\\u7403\\u7522\\u54C1\\u7BA1\\u7406\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        mb: 2\n      },\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        color: \"primary\",\n        onClick: () => setEditingProduct({}),\n        children: \"\\u65B0\\u589E\\u7522\\u54C1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImportCSV, {\n        onSuccess: handleImportSuccess\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Paper, {\n      sx: {\n        p: 2,\n        mb: 2\n      },\n      children: /*#__PURE__*/_jsxDEV(ProductList, {\n        products: products,\n        onEdit: setEditingProduct,\n        onDelete: handleDelete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this), editingProduct !== null && /*#__PURE__*/_jsxDEV(ProductForm, {\n      product: editingProduct,\n      onSave: handleSave,\n      onCancel: () => setEditingProduct(null)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: snackbar.open,\n      autoHideDuration: 3000,\n      onClose: () => setSnackbar({\n        ...snackbar,\n        open: false\n      }),\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'center'\n      },\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        severity: snackbar.severity,\n        sx: {\n          width: '100%'\n        },\n        children: snackbar.message\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"nhnw0Pz4PeAGP/S1c1QRHBd66m0=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useEffect","useState","Container","Typography","Button","Snackbar","Alert","Box","Paper","ProductList","ProductForm","ImportCSV","jsxDEV","_jsxDEV","App","_s","products","setProducts","editingProduct","setEditingProduct","snackbar","setSnackbar","open","message","severity","fetchProducts","res","fetch","data","json","err","handleSave","product","isEdit","payload","name_en","name_zh","materials_en","materials_zh","price","image_url","id","method","headers","body","JSON","stringify","ok","Error","handleDelete","window","confirm","handleImportSuccess","maxWidth","sx","py","children","variant","gutterBottom","align","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","mb","color","onClick","onSuccess","p","onEdit","onDelete","onSave","onCancel","autoHideDuration","onClose","anchorOrigin","vertical","horizontal","width","_c","$RefreshReg$"],"sources":["C:/Users/2311007/Desktop/poke/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  Container,\n  Typography,\n  Button,\n  Snackbar,\n  Alert,\n  Box,\n  Paper,\n} from '@mui/material';\nimport ProductList from './ProductList';\nimport ProductForm from './ProductForm';\nimport ImportCSV from './ImportCSV';\n\nfunction App() {\n  const [products, setProducts] = useState([]);\n  const [editingProduct, setEditingProduct] = useState(null);\n  const [snackbar, setSnackbar] = useState({\n    open: false,\n    message: '',\n    severity: 'success',\n  });\n\n  // 取得產品列表\n  const fetchProducts = async () => {\n    try {\n      const res = await fetch('/api/products');\n      const data = await res.json();\n      setProducts(data);\n    } catch (err) {\n      setSnackbar({ open: true, message: '載入產品失敗', severity: 'error' });\n    }\n  };\n\n  useEffect(() => {\n    fetchProducts();\n  }, []);\n\n  // 新增或編輯產品\n  const handleSave = async (product, isEdit) => {\n    // 欄位同步：name_en, name_zh, materials_en, materials_zh, price, image_url\n    const payload = {\n      name_en: product.name_en || '',\n      name_zh: product.name_zh || '',\n      materials_en: product.materials_en || '',\n      materials_zh: product.materials_zh || '',\n      price: product.price || '',\n      image_url: product.image_url || '',\n    };\n    try {\n      const res = await fetch(\n        isEdit ? `/api/products/${product.id}` : '/api/products',\n        {\n          method: isEdit ? 'PUT' : 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(payload),\n        }\n      );\n      if (!res.ok) throw new Error('儲存失敗');\n      setSnackbar({\n        open: true,\n        message: isEdit ? '產品已更新' : '產品已新增',\n        severity: 'success',\n      });\n      setEditingProduct(null);\n      fetchProducts();\n    } catch {\n      setSnackbar({ open: true, message: '儲存失敗', severity: 'error' });\n    }\n  };\n\n  // 刪除產品\n  const handleDelete = async (id) => {\n    if (!window.confirm('確定要刪除這個產品嗎？')) return;\n    try {\n      const res = await fetch(`/api/products/${id}`, { method: 'DELETE' });\n      if (!res.ok) throw new Error('刪除失敗');\n      setSnackbar({ open: true, message: '產品已刪除', severity: 'success' });\n      fetchProducts();\n    } catch {\n      setSnackbar({ open: true, message: '刪除失敗', severity: 'error' });\n    }\n  };\n\n  // 批次匯入成功後刷新\n  const handleImportSuccess = () => {\n    setSnackbar({ open: true, message: '匯入成功', severity: 'success' });\n    fetchProducts();\n  };\n\n  return (\n    <Container maxWidth=\"md\" sx={{ py: 4 }}>\n      <Typography variant=\"h4\" gutterBottom align=\"center\">\n        寶可夢 3D 列印球產品管理\n      </Typography>\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 2 }}>\n        <Button\n          variant=\"contained\"\n          color=\"primary\"\n          onClick={() => setEditingProduct({})}\n        >\n          新增產品\n        </Button>\n        <ImportCSV onSuccess={handleImportSuccess} />\n      </Box>\n      <Paper sx={{ p: 2, mb: 2 }}>\n        <ProductList\n          products={products}\n          onEdit={setEditingProduct}\n          onDelete={handleDelete}\n        />\n      </Paper>\n      {editingProduct !== null && (\n        <ProductForm\n          product={editingProduct}\n          onSave={handleSave}\n          onCancel={() => setEditingProduct(null)}\n        />\n      )}\n      <Snackbar\n        open={snackbar.open}\n        autoHideDuration={3000}\n        onClose={() => setSnackbar({ ...snackbar, open: false })}\n        anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n      >\n        <Alert severity={snackbar.severity} sx={{ width: '100%' }}>\n          {snackbar.message}\n        </Alert>\n      </Snackbar>\n    </Container>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}