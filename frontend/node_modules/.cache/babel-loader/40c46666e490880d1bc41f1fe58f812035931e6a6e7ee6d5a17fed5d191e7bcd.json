{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\2311007\\\\Desktop\\\\poke\\\\frontend\\\\src\\\\ImportCSV.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState } from 'react';\nimport { Button, CircularProgress } from '@mui/material';\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction ImportCSV({\n  onSuccess\n}) {\n  _s();\n  const fileInput = useRef();\n  const [loading, setLoading] = useState(false);\n  const handleFileChange = async e => {\n    if (!e.target.files || !e.target.files[0]) return;\n    setLoading(true);\n    const data = new FormData();\n    data.append('file', e.target.files[0]);\n    try {\n      const res = await fetch('/api/products/import', {\n        method: 'POST',\n        body: data\n      });\n      if (!res.ok) throw new Error('匯入失敗');\n      onSuccess();\n    } catch {\n      alert('匯入失敗，請檢查檔案格式');\n    }\n    setLoading(false);\n    e.target.value = '';\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \".csv\",\n      style: {\n        display: 'none'\n      },\n      ref: fileInput,\n      onChange: handleFileChange,\n      disabled: loading\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"outlined\",\n      startIcon: /*#__PURE__*/_jsxDEV(UploadFileIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 20\n      }, this),\n      onClick: () => fileInput.current && fileInput.current.click(),\n      disabled: loading,\n      children: \"\\u6279\\u6B21\\u532F\\u5165\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(CircularProgress, {\n      size: 20,\n      sx: {\n        ml: 1\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true);\n}\n_s(ImportCSV, \"825NVXLR/4zBmFU1uulOR0BwdYs=\");\n_c = ImportCSV;\nexport default ImportCSV;\nvar _c;\n$RefreshReg$(_c, \"ImportCSV\");","map":{"version":3,"names":["React","useRef","useState","Button","CircularProgress","UploadFileIcon","jsxDEV","_jsxDEV","Fragment","_Fragment","ImportCSV","onSuccess","_s","fileInput","loading","setLoading","handleFileChange","e","target","files","data","FormData","append","res","fetch","method","body","ok","Error","alert","value","children","type","accept","style","display","ref","onChange","disabled","fileName","_jsxFileName","lineNumber","columnNumber","variant","startIcon","onClick","current","click","size","sx","ml","_c","$RefreshReg$"],"sources":["C:/Users/2311007/Desktop/poke/frontend/src/ImportCSV.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport { Button, CircularProgress } from '@mui/material';\r\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\r\n\r\nfunction ImportCSV({ onSuccess }) {\r\n  const fileInput = useRef();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleFileChange = async (e) => {\r\n    if (!e.target.files || !e.target.files[0]) return;\r\n    setLoading(true);\r\n    const data = new FormData();\r\n    data.append('file', e.target.files[0]);\r\n    try {\r\n      const res = await fetch('/api/products/import', {\r\n        method: 'POST',\r\n        body: data,\r\n      });\r\n      if (!res.ok) throw new Error('匯入失敗');\r\n      onSuccess();\r\n    } catch {\r\n      alert('匯入失敗，請檢查檔案格式');\r\n    }\r\n    setLoading(false);\r\n    e.target.value = '';\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        type=\"file\"\r\n        accept=\".csv\"\r\n        style={{ display: 'none' }}\r\n        ref={fileInput}\r\n        onChange={handleFileChange}\r\n        disabled={loading}\r\n      />\r\n      <Button\r\n        variant=\"outlined\"\r\n        startIcon={<UploadFileIcon />}\r\n        onClick={() => fileInput.current && fileInput.current.click()}\r\n        disabled={loading}\r\n      >\r\n        批次匯入\r\n      </Button>\r\n      {loading && <CircularProgress size={20} sx={{ ml: 1 }} />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ImportCSV;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AAC/C,SAASC,MAAM,EAAEC,gBAAgB,QAAQ,eAAe;AACxD,OAAOC,cAAc,MAAM,gCAAgC;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAE5D,SAASC,SAASA,CAAC;EAAEC;AAAU,CAAC,EAAE;EAAAC,EAAA;EAChC,MAAMC,SAAS,GAAGZ,MAAM,CAAC,CAAC;EAC1B,MAAM,CAACa,OAAO,EAAEC,UAAU,CAAC,GAAGb,QAAQ,CAAC,KAAK,CAAC;EAE7C,MAAMc,gBAAgB,GAAG,MAAOC,CAAC,IAAK;IACpC,IAAI,CAACA,CAAC,CAACC,MAAM,CAACC,KAAK,IAAI,CAACF,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,EAAE;IAC3CJ,UAAU,CAAC,IAAI,CAAC;IAChB,MAAMK,IAAI,GAAG,IAAIC,QAAQ,CAAC,CAAC;IAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,EAAEL,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;IACtC,IAAI;MACF,MAAMI,GAAG,GAAG,MAAMC,KAAK,CAAC,sBAAsB,EAAE;QAC9CC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEN;MACR,CAAC,CAAC;MACF,IAAI,CAACG,GAAG,CAACI,EAAE,EAAE,MAAM,IAAIC,KAAK,CAAC,MAAM,CAAC;MACpCjB,SAAS,CAAC,CAAC;IACb,CAAC,CAAC,MAAM;MACNkB,KAAK,CAAC,cAAc,CAAC;IACvB;IACAd,UAAU,CAAC,KAAK,CAAC;IACjBE,CAAC,CAACC,MAAM,CAACY,KAAK,GAAG,EAAE;EACrB,CAAC;EAED,oBACEvB,OAAA,CAAAE,SAAA;IAAAsB,QAAA,gBACExB,OAAA;MACEyB,IAAI,EAAC,MAAM;MACXC,MAAM,EAAC,MAAM;MACbC,KAAK,EAAE;QAAEC,OAAO,EAAE;MAAO,CAAE;MAC3BC,GAAG,EAAEvB,SAAU;MACfwB,QAAQ,EAAErB,gBAAiB;MAC3BsB,QAAQ,EAAExB;IAAQ;MAAAyB,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACnB,CAAC,eACFnC,OAAA,CAACJ,MAAM;MACLwC,OAAO,EAAC,UAAU;MAClBC,SAAS,eAAErC,OAAA,CAACF,cAAc;QAAAkC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAE;MAC9BG,OAAO,EAAEA,CAAA,KAAMhC,SAAS,CAACiC,OAAO,IAAIjC,SAAS,CAACiC,OAAO,CAACC,KAAK,CAAC,CAAE;MAC9DT,QAAQ,EAAExB,OAAQ;MAAAiB,QAAA,EACnB;IAED;MAAAQ,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EACR5B,OAAO,iBAAIP,OAAA,CAACH,gBAAgB;MAAC4C,IAAI,EAAE,EAAG;MAACC,EAAE,EAAE;QAAEC,EAAE,EAAE;MAAE;IAAE;MAAAX,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EAAA,eACzD,CAAC;AAEP;AAAC9B,EAAA,CA5CQF,SAAS;AAAAyC,EAAA,GAATzC,SAAS;AA8ClB,eAAeA,SAAS;AAAC,IAAAyC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}