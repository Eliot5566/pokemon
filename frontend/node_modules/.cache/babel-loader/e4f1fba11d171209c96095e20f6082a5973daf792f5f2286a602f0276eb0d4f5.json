{"ast":null,"code":"import React,{useRef,useState}from'react';import{Button,CircularProgress}from'@mui/material';import UploadFileIcon from'@mui/icons-material/UploadFile';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";function ImportCSV(_ref){let{onSuccess}=_ref;const API_BASE_URL=process.env.REACT_APP_API_BASE_URL||'';const fileInput=useRef();const[loading,setLoading]=useState(false);const handleFileChange=async e=>{if(!e.target.files||!e.target.files[0])return;setLoading(true);const data=new FormData();data.append('file',e.target.files[0]);try{const res=await fetch(`${API_BASE_URL}/api/products/import`,{method:'POST',body:data});if(!res.ok)throw new Error('匯入失敗');onSuccess();}catch{alert('匯入失敗，請檢查檔案格式');}setLoading(false);e.target.value='';};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".csv\",style:{display:'none'},ref:fileInput,onChange:handleFileChange,disabled:loading}),/*#__PURE__*/_jsx(Button,{variant:\"outlined\",startIcon:/*#__PURE__*/_jsx(UploadFileIcon,{}),onClick:()=>fileInput.current&&fileInput.current.click(),disabled:loading,children:\"\\u6279\\u6B21\\u532F\\u5165\"}),loading&&/*#__PURE__*/_jsx(CircularProgress,{size:20,sx:{ml:1}})]});}export default ImportCSV;","map":{"version":3,"names":["React","useRef","useState","Button","CircularProgress","UploadFileIcon","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","ImportCSV","_ref","onSuccess","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","fileInput","loading","setLoading","handleFileChange","e","target","files","data","FormData","append","res","fetch","method","body","ok","Error","alert","value","children","type","accept","style","display","ref","onChange","disabled","variant","startIcon","onClick","current","click","size","sx","ml"],"sources":["C:/Users/2311007/Desktop/poke/frontend/src/ImportCSV.js"],"sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport { Button, CircularProgress } from '@mui/material';\r\nimport UploadFileIcon from '@mui/icons-material/UploadFile';\r\n\r\nfunction ImportCSV({ onSuccess }) {\r\n  const API_BASE_URL = process.env.REACT_APP_API_BASE_URL || '';\r\n  const fileInput = useRef();\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleFileChange = async (e) => {\r\n    if (!e.target.files || !e.target.files[0]) return;\r\n    setLoading(true);\r\n    const data = new FormData();\r\n    data.append('file', e.target.files[0]);\r\n    try {\r\n      const res = await fetch(`${API_BASE_URL}/api/products/import`, {\r\n        method: 'POST',\r\n        body: data,\r\n      });\r\n      if (!res.ok) throw new Error('匯入失敗');\r\n      onSuccess();\r\n    } catch {\r\n      alert('匯入失敗，請檢查檔案格式');\r\n    }\r\n    setLoading(false);\r\n    e.target.value = '';\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <input\r\n        type=\"file\"\r\n        accept=\".csv\"\r\n        style={{ display: 'none' }}\r\n        ref={fileInput}\r\n        onChange={handleFileChange}\r\n        disabled={loading}\r\n      />\r\n      <Button\r\n        variant=\"outlined\"\r\n        startIcon={<UploadFileIcon />}\r\n        onClick={() => fileInput.current && fileInput.current.click()}\r\n        disabled={loading}\r\n      >\r\n        批次匯入\r\n      </Button>\r\n      {loading && <CircularProgress size={20} sx={{ ml: 1 }} />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ImportCSV;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,MAAM,CAAEC,QAAQ,KAAQ,OAAO,CAC/C,OAASC,MAAM,CAAEC,gBAAgB,KAAQ,eAAe,CACxD,MAAO,CAAAC,cAAc,KAAM,gCAAgC,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,QAAA,IAAAC,SAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE5D,QAAS,CAAAC,SAASA,CAAAC,IAAA,CAAgB,IAAf,CAAEC,SAAU,CAAC,CAAAD,IAAA,CAC9B,KAAM,CAAAE,YAAY,CAAGC,OAAO,CAACC,GAAG,CAACC,sBAAsB,EAAI,EAAE,CAC7D,KAAM,CAAAC,SAAS,CAAGlB,MAAM,CAAC,CAAC,CAC1B,KAAM,CAACmB,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAE7C,KAAM,CAAAoB,gBAAgB,CAAG,KAAO,CAAAC,CAAC,EAAK,CACpC,GAAI,CAACA,CAAC,CAACC,MAAM,CAACC,KAAK,EAAI,CAACF,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAE,OAC3CJ,UAAU,CAAC,IAAI,CAAC,CAChB,KAAM,CAAAK,IAAI,CAAG,GAAI,CAAAC,QAAQ,CAAC,CAAC,CAC3BD,IAAI,CAACE,MAAM,CAAC,MAAM,CAAEL,CAAC,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC,CACtC,GAAI,CACF,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAC,KAAK,CAAC,GAAGf,YAAY,sBAAsB,CAAE,CAC7DgB,MAAM,CAAE,MAAM,CACdC,IAAI,CAAEN,IACR,CAAC,CAAC,CACF,GAAI,CAACG,GAAG,CAACI,EAAE,CAAE,KAAM,IAAI,CAAAC,KAAK,CAAC,MAAM,CAAC,CACpCpB,SAAS,CAAC,CAAC,CACb,CAAE,KAAM,CACNqB,KAAK,CAAC,cAAc,CAAC,CACvB,CACAd,UAAU,CAAC,KAAK,CAAC,CACjBE,CAAC,CAACC,MAAM,CAACY,KAAK,CAAG,EAAE,CACrB,CAAC,CAED,mBACEzB,KAAA,CAAAF,SAAA,EAAA4B,QAAA,eACE9B,IAAA,UACE+B,IAAI,CAAC,MAAM,CACXC,MAAM,CAAC,MAAM,CACbC,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAO,CAAE,CAC3BC,GAAG,CAAEvB,SAAU,CACfwB,QAAQ,CAAErB,gBAAiB,CAC3BsB,QAAQ,CAAExB,OAAQ,CACnB,CAAC,cACFb,IAAA,CAACJ,MAAM,EACL0C,OAAO,CAAC,UAAU,CAClBC,SAAS,cAAEvC,IAAA,CAACF,cAAc,GAAE,CAAE,CAC9B0C,OAAO,CAAEA,CAAA,GAAM5B,SAAS,CAAC6B,OAAO,EAAI7B,SAAS,CAAC6B,OAAO,CAACC,KAAK,CAAC,CAAE,CAC9DL,QAAQ,CAAExB,OAAQ,CAAAiB,QAAA,CACnB,0BAED,CAAQ,CAAC,CACRjB,OAAO,eAAIb,IAAA,CAACH,gBAAgB,EAAC8C,IAAI,CAAE,EAAG,CAACC,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAE,CAAC,EACzD,CAAC,CAEP,CAEA,cAAe,CAAAxC,SAAS","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}